<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Agenda ‚Äî Un Empleado</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <aside class="sidebar">
    <div class="brand">
      <div class="logo">üóìÔ∏è</div>
      <div class="brand-text">
        <h1>Agenda PRO</h1>
        <small>1 Empleado</small>
      </div>
    </div>

    <nav class="menu">
      <button class="menu-btn active" data-view="agenda">Agenda</button>
      <button class="menu-btn" data-view="bloqueos">Bloqueos</button>
      <button class="menu-btn" data-view="config">Config</button>
      <button class="menu-btn" data-view="ayuda">Ayuda</button>
    </nav>

    <div class="footer">
      <small>Hecho para GitHub Pages</small>
    </div>
  </aside>

  <main class="content">
    <!-- AGENDA -->
    <section id="view-agenda" class="view active">
      <header class="section-head">
        <h2>Agenda</h2>
        <div class="month-nav">
          <button id="prevMonth" aria-label="Mes anterior">‚Äπ</button>
          <h3 id="monthLabel">Mes A√±o</h3>
          <button id="nextMonth" aria-label="Mes siguiente">‚Ä∫</button>
        </div>
      </header>

      <div id="calendar" class="calendar"></div>

      <div class="panel">
        <h3>Horarios disponibles</h3>
        <div class="legend">
          <span class="dot free"></span> Disponible
          <span class="dot blocked"></span> Bloqueado
          <span class="dot booked"></span> Reservado
          <span class="dot selected"></span> Seleccionado
        </div>
        <div id="slots" class="slots"></div>
      </div>

      <form id="bookingForm" class="form card">
        <h3>Formulario</h3>
        <div class="grid">
          <label>
            Nombre del cliente
            <input type="text" id="name" placeholder="Nombre y Apellido" required />
          </label>
          <label>
            Tel√©fono del cliente (opcional)
            <input type="tel" id="clientPhone" placeholder="+1 787 000 0000" />
          </label>
          <label class="full">
            Nota / Servicio
            <textarea id="notes" rows="3" placeholder="Breve descripci√≥n"></textarea>
          </label>
        </div>

        <div class="row">
          <div id="selectionInfo" class="selection-info">
            Selecciona una fecha y hora.
          </div>
          <div class="actions">
            <button type="button" id="sendWhatsApp" class="primary" disabled>Enviar por WhatsApp</button>
            <button type="button" id="markBooked" class="ghost" disabled>Marcar como Reservado</button>
          </div>
        </div>
      </form>
    </section>

    <!-- BLOQUEOS (ADMIN) -->
    <section id="view-bloqueos" class="view">
      <header class="section-head">
        <h2>Bloqueos (Admin)</h2>
      </header>

      <div class="card">
        <div class="admin-row">
          <label>
            PIN de Admin
            <input id="adminPin" type="password" placeholder="1234" />
          </label>
          <button id="enterAdmin" class="primary">Entrar</button>
          <button id="exitAdmin" class="ghost">Salir</button>
          <span id="adminStatus" class="badge">Modo: usuario</span>
        </div>
        <p class="muted">
          En modo Admin, al hacer clic en una hora la bloqueas/desbloqueas. Los cambios se guardan en localStorage.
        </p>
      </div>

      <div class="card">
        <h3>Bloqueos r√°pidos</h3>
        <div class="grid">
          <label>
            Bloquear d√≠a completo
            <input id="blockDate" type="date" />
          </label>
          <button id="blockDayBtn" class="warn">Bloquear d√≠a</button>

          <label>
            Desbloquear d√≠a completo
            <input id="unblockDate" type="date" />
          </label>
          <button id="unblockDayBtn" class="">Desbloquear d√≠a</button>
        </div>
      </div>

      <div class="card">
        <h3>Exportar / Importar bloqueos</h3>
        <div class="grid">
          <button id="exportBlocks" class="ghost">Exportar JSON</button>
          <label class="filelabel">
            Importar JSON
            <input id="importBlocks" type="file" accept="application/json" />
          </label>
          <button id="clearAll" class="warn">Borrar todo</button>
        </div>
      </div>
    </section>

    <!-- CONFIG -->
    <section id="view-config" class="view">
      <header class="section-head">
        <h2>Configuraci√≥n</h2>
      </header>

      <div class="card">
        <h3>WhatsApp del negocio</h3>
        <div class="grid">
          <label>
            N√∫mero (solo d√≠gitos, ej. 17876643079)
            <input id="bizPhone" type="text" placeholder="17876643079" />
          </label>
          <label>
            Nombre del negocio (para el mensaje)
            <input id="bizName" type="text" placeholder="Oasis Air Cleaner Services LLC" />
          </label>
          <button id="saveConfig" class="primary">Guardar Config</button>
        </div>
        <p class="muted">El env√≠o abre <code>wa.me</code> con el mensaje prellenado. Luego solo env√≠as.</p>
      </div>

      <div class="card">
        <h3>Horario laboral</h3>
        <div class="grid">
          <label>
            Inicio (HH:MM)
            <input id="workStart" type="time" />
          </label>
          <label>
            Fin (HH:MM)
            <input id="workEnd" type="time" />
          </label>
          <label>
            Duraci√≥n de cita (min)
            <input id="slotMinutes" type="number" min="15" step="15" />
          </label>
          <button id="saveWorkday" class="">Guardar Horario</button>
        </div>
        <p class="muted">Aplica a todos los d√≠as. Puedes bloquear horas espec√≠ficas en ‚ÄúBloqueos‚Äù.</p>
      </div>
    </section>

    <!-- AYUDA -->
    <section id="view-ayuda" class="view">
      <header class="section-head">
        <h2>Ayuda</h2>
      </header>
      <div class="card">
        <ul class="help">
          <li>Selecciona d√≠a en el calendario y elige una hora libre.</li>
          <li>Rellena el formulario y toca <b>Enviar por WhatsApp</b>.</li>
          <li>Modo Admin (PIN por defecto <b>1234</b>): permite bloquear/desbloquear horas o d√≠as completos.</li>
          <li>Todos los datos se guardan en <b>localStorage</b> (navegador).</li>
        </ul>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
